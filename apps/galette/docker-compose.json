{
  "services": [
    {
      "name": "mariadb",
      "image": "mariadb:10.5",
      "environment": {
        "MYSQL_ROOT_PASSWORD": "rootpass",
        "MYSQL_DATABASE": "{GALETTE_NAME_DATABASE}",
        "MYSQL_USER": "{GALETTE_USER_DATABASE}",
        "MYSQL_PASSWORD": "{GALETTE_PASSWORD_DATABASE}"
      },
      "volumes": [
        {
          "hostPath": "${APP_DATA_DIR}/galette_db",
          "containerPath": "/var/lib/mysql",
          "readOnly": false,
          "shared": false,
          "private": false
        }
      ]
    },
    {
      "name": "galette",
      "image": "galette/galette:1.1.5.2",
      "environment": {
        "DB_TYPE": "mysqli",
        "DB_HOST": "{GALETTE_NAME_HOST}",
        "DB_NAME": "{GALETTE_NAME_DATABASE}",
        "DB_USER": "{GALETTE_USER_DATABASE}",
        "DB_PASS": "{GALETTE_PASSWORD_DATABASE}"
      },
      "internalPort": 80,
      "volumes": [
        {
          "hostPath": "${APP_DATA_DIR}/galette_config",
          "containerPath": "/var/www/galette/config",
          "readOnly": false,
          "shared": false,
          "private": false
        },
        {
          "hostPath": "${APP_DATA_DIR}/galette_attachments",
          "containerPath": "/var/www/galette/data/attachments",
          "readOnly": false,
          "shared": false,
          "private": false
        },
        {
          "hostPath": "${APP_DATA_DIR}/galette_cache",
          "containerPath": "/var/www/galette/data/cache",
          "readOnly": false,
          "shared": false,
          "private": false
        },
        {
          "hostPath": "${APP_DATA_DIR}/galette_files",
          "containerPath": "/var/www/galette/data/files",
          "readOnly": false,
          "shared": false,
          "private": false
        },
        {
          "hostPath": "${APP_DATA_DIR}/galette_logs",
          "containerPath": "/var/www/galette/data/logs",
          "readOnly": false,
          "shared": false,
          "private": false
        },
        {
          "hostPath": "${APP_DATA_DIR}/galette_photos",
          "containerPath": "/var/www/galette/data/photos",
          "readOnly": false,
          "shared": false,
          "private": false
        },
        {
          "hostPath": "${APP_DATA_DIR}/galette_templates",
          "containerPath": "/var/www/galette/data/templates_c",
          "readOnly": false,
          "shared": false,
          "private": false
        }
      ],
      "dependsOn": {
        "mariadb": {
          "condition": "service_started"
        }
      },
      "isMain": true
    }
  ]
}